<!DOCTYPE html>
<html>
   <head>
		<meta name = "viewport" content = "width = device-width, initial-scale = 1">
		<link rel = "stylesheet" href = "https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
		<script src = "https://code.jquery.com/jquery-1.11.3.min.js"></script>
		<script src = "https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
		<style>
		
		</style>
	</head>
	<body>
		<div data-role = "page" id = "index">
			<div data-role = "header">
				<h1>Welcome to the history quiz!</h1>
			</div>
			<div data-role = "main" class = "ui-content">
				<form>

				<fieldset data-role = "controlgroup">
					<input type = "radio" id = "radio1" name = "radio-choice-0" />
					<label for = "radio1">Easy</label>

					<input type = "radio" id = "radio2" name = "radio-choice-0" />
					<label for = "radio2">Medium</label>

					<input type = "radio" id = "radio3" name = "radio-choice-0" />
					<label for = "radio3">Hard</label>
				</fieldset>
				
					<label for = "slider">Amount of questions</label>
					<input type = "range" name = "slider" id = "slider" value = "20" min = "1" max = "50" data-highlight = "true">
							
				</form>
				<a class="ui-btn ui-shadow ui-corner-all" id="start" data-transition = "pop">Start!</a>
			</div>
			<div data-role = "footer" class = "ui-content">
				
			</div>
		</div>
		
		<script>
		
		var answerArray = [];
			$(document).ready(function() {
				
				$("#start").click(function() {
					var slider = parseInt($("#slider").val())
					var pageContent = "";
					
					if(!selectedDifficultyCheck()){
						alert("You have not selected difficulty");
						return;
					}
					
					for(var i = 1; i <= slider; i++){

							pageContent = pageContent +
							'<div data-role = "page" id = "page'+i+'">' +
								'<div data-role = "header"> <h1>Question #'+i+'</h1> </div>' +
								'<div role = "main" class = "ui-content">'+ 
								
									'<form>' +
								
									'<fieldset data-role = "controlgroup">'+
										'<input type = "radio" id = "q'+i+'answer1" name = "radio-choice-0" />' +
										'<label for = "q'+i+'answer1">Answer1</label>' +
										
										'<input type = "radio" id = "q'+i+'answer2" name = "radio-choice-0" />' +
										'<label for = "q'+i+'answer2">Answer2</label>' +
										
										'<input type = "radio" id = "q'+i+'answer3" name = "radio-choice-0" />' +
										'<label for = "q'+i+'answer3">Answer3</label>' +
										
										'<input type = "radio" id = "q'+i+'answer4" name = "radio-choice-0" />' +
										'<label for = "q'+i+'answer4">Answer4</label>' +
									'</fieldset>'+
									
									'</form>' +
									
									'<fieldset class = "ui-grid-a">'+
										'<div class = "ui-block-a">'+
											'<a class = "ui-btn ui-corner-all ui-shadow ui-btn-a" onClick="previousQuestionPage('+i+')">Previous Question</a>'+
										'</div>'+
         
										
										'<div class = "ui-block-b">'
										if(i == slider)
											pageContent = pageContent + '<a class = "ui-btn ui-corner-all ui-shadow ui-btn-b"  id="continueButton'+i+'" onClick="nextQuestionPage('+i+','+slider+')">Get results</a>';
										else
											pageContent = pageContent + '<a class = "ui-btn ui-corner-all ui-shadow ui-btn-b" id="continueButton'+i+'" onClick="nextQuestionPage('+i+','+slider+')">Next Question</a>';;
										pageContent = pageContent +	'</div>' +
									'</fieldset>'
								pageContent = pageContent +'</div>'+
							'<div data-role = "footer"> <h4>'+i+'/'+slider+'</h4></div>'+
							'</div>';
							
						$("body").html(pageContent);
					}
					$.mobile.navigate("#page1");
					
				});
				
				function getDifficulty(){
					if ($("#radio1").is(":checked")) return "easy";
					else if($("#radio2").is(":checked"))return "medium";
					else if($("#radio3").is(":checked"))return "hard";
				}
				
				function selectedDifficultyCheck(){
					if((typeof getDifficulty()) == "string"){
						return true;
					}
					else if((typeof getDifficulty()) != "string")
					{
						return false;
					}
				}
				
			});
			
			
			function getAnswersFromQuestion(currentNumber){
				if ($("#q"+currentNumber+"answer1").is(":checked")) return 1;
				else if($("#q"+currentNumber+"answer2").is(":checked"))return 2;
				else if($("#q"+currentNumber+"answer3").is(":checked"))return 3;
				else if($("#q"+currentNumber+"answer4").is(":checked"))return 4;
			}
				
			function allAnswersChecked(amountOfQuestions){
				for(var i = 1; i <= amountOfQuestions; i++){
					if(isNaN(getAnswersFromQuestion(i))) answerArray.push("Not Answered");
					else answerArray.push(getAnswersFromQuestion(i).toString());
				}
			}
			
			function nextQuestionPage(currentNumber,lastNumber){
				if(currentNumber == lastNumber){	
					allAnswersChecked(lastNumber)
					generateRightAnswerPage()
				}
				else{
					$.mobile.navigate("#page" + (currentNumber + 1).toString());
				}	
			}
			
			function previousQuestionPage(currentNumber){
				if(currentNumber == 1){
					return
				}
				else $.mobile.navigate("#page" + (currentNumber - 1).toString());
			}
			
			function generateRightAnswerPage(){
				var answerPageContent = "";
				
				answerPageContent += 
					'<div data-role = "page" id = "answerPage">'+
						'<div data-role = "header"> <h1>Results / Answers</h1> </div>' +
						'<div role = "main" class = "ui-content">'+
						'</div>'+
						'<div data-role = "footer"> <h4>Result</h4></div>'+
					'</div>';
				$("body").html(answerPageContent);
				$.mobile.navigate("#answerPage");
			}
			
		</script>
	</body>
</html>