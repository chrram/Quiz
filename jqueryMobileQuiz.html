<!DOCTYPE html>
<html>
   <head>
		<meta name = "viewport" content = "width = device-width, initial-scale = 1">
		<link rel = "stylesheet" href = "https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
		<script src = "https://code.jquery.com/jquery-1.11.3.min.js"></script>
		<script src = "https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
		<style>
			h3{
				text-align:center;
			}
			<!-- .ui-body-a, -->
			<!-- .ui-page-theme-a.ui-body-inherit, -->
			<!-- html.ui-bar-a.ui-body-inherit, -->
			<!-- html.ui-body-a.ui-body-inherit, -->
			<!-- html body.ui-group-theme-a.ui-body-inherit, -->
			<!-- html.ui-panel-page-container-a{ -->
				<!-- color:green; -->
			<!-- } -->
			li{
				<!-- text-align:center !important; -->
			}
			
			li.wrong{
				background: #ff416c; /* fallback for old browsers */
				background: -webkit-linear-gradient(to top, #ff416c, #ff4b2b); /* Chrome 10-25, Safari 5.1-6 */
				background: linear-gradient(to top, #ff416c, #ff4b2b);
				color:white !important;
			}
			
			li.right{
				background: #11998e;  /* fallback for old browsers */
				background: -webkit-linear-gradient(to top, #38ef7d, #11998e);  /* Chrome 10-25, Safari 5.1-6 */
				background: linear-gradient(to top, #38ef7d, #11998e); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
				color: white !important;
			}
		</style>
	</head>
	<body>
		<div data-role = "page" id = "index">
			<div data-role = "header">
				<h1>Welcome to the history quiz!</h1>
			</div>
			<div data-role = "main" class = "ui-content">
				<form>

				<fieldset data-role = "controlgroup">
					<input type = "radio" id = "radio1" name = "radio-choice-0" />
					<label for = "radio1">Easy</label>

					<input type = "radio" id = "radio2" name = "radio-choice-0" />
					<label for = "radio2">Medium</label>

					<input type = "radio" id = "radio3" name = "radio-choice-0" />
					<label for = "radio3">Hard</label>
				</fieldset>
				
					<label for = "slider">Amount of questions</label>
					<input type = "range" name = "slider" id = "slider" value = "20" min = "1" max = "50" data-highlight = "true">
							
				</form>
				<a class="ui-btn ui-shadow ui-corner-all" id="start" data-transition = "pop">Start!</a>
			</div>
			<div data-role = "footer" class = "ui-content">
				
			</div>
		</div>
		
		<script>
		
		var answerArray = [];
			$(document).ready(function() {
				
				$("#start").click(function() {
					var slider = parseInt($("#slider").val())
					var pageContent = "";
					
					if(!selectedDifficultyCheck()){
						alert("You have not selected difficulty");
						return;
					}
					
					for(var i = 1; i <= slider; i++){

							pageContent += 
							'<div data-role = "page" id = "page'+i+'">' +
								'<div data-role = "header"> <h1>Question #'+i+'</h1> </div>' +
								'<div role = "main" class = "ui-content">'+ 
								
									'<form>' +
								
									'<fieldset data-role = "controlgroup">'+
										'<input type = "radio" id = "q'+i+'answer1" name = "radio-choice-0" />' +
										'<label for = "q'+i+'answer1">Answer1</label>' +
										
										'<input type = "radio" id = "q'+i+'answer2" name = "radio-choice-0" />' +
										'<label for = "q'+i+'answer2">Answer2</label>' +
										
										'<input type = "radio" id = "q'+i+'answer3" name = "radio-choice-0" />' +
										'<label for = "q'+i+'answer3">Answer3</label>' +
										
										'<input type = "radio" id = "q'+i+'answer4" name = "radio-choice-0" />' +
										'<label for = "q'+i+'answer4">Answer4</label>' +
									'</fieldset>'+
									
									'</form>' +
									
									'<fieldset class = "ui-grid-a">'+
										'<div class = "ui-block-a">'+
											'<a class = "ui-btn ui-corner-all ui-shadow ui-btn-a" onClick="previousQuestionPage('+i+')">Previous Question</a>'+
										'</div>'+
         
										
										'<div class = "ui-block-b">'
										if(i == slider)
											pageContent += '<a class = "ui-btn ui-corner-all ui-shadow ui-btn-b"  id="continueButton'+i+'" onClick="nextQuestionPage('+i+','+slider+')">Get results</a>';
										else
											pageContent += '<a class = "ui-btn ui-corner-all ui-shadow ui-btn-b" id="continueButton'+i+'" onClick="nextQuestionPage('+i+','+slider+')">Next Question</a>';;
										pageContent +=	'</div>' +
									'</fieldset>'
								pageContent +='</div>'+
							'<div data-role = "footer"> <h4>'+i+'/'+slider+'</h4></div>'+
							'</div>';
							
						$("body").html(pageContent);
					}
					$.mobile.navigate("#page1");
					
				});
				
				function getDifficulty(){
					if ($("#radio1").is(":checked")) return "easy";
					else if($("#radio2").is(":checked"))return "medium";
					else if($("#radio3").is(":checked"))return "hard";
				}
				
				function selectedDifficultyCheck(){
					if((typeof getDifficulty()) == "string"){
						return true;
					}
					else if((typeof getDifficulty()) != "string")
					{
						return false;
					}
				}
				
			});
			
			
			function getAnswersFromQuestion(currentNumber){
				if ($("#q"+currentNumber+"answer1").is(":checked")) return 1;
				else if($("#q"+currentNumber+"answer2").is(":checked"))return 2;
				else if($("#q"+currentNumber+"answer3").is(":checked"))return 3;
				else if($("#q"+currentNumber+"answer4").is(":checked"))return 4;
			}
				
			function allAnswersChecked(amountOfQuestions){
				for(var i = 1; i <= amountOfQuestions; i++){
					if(isNaN(getAnswersFromQuestion(i))) answerArray.push("Not Answered");
					else answerArray.push(getAnswersFromQuestion(i).toString());
				}
			}
			
			function nextQuestionPage(currentNumber,lastNumber){
				if(currentNumber == lastNumber){	
					allAnswersChecked(lastNumber)
					generateRightAnswerPage(lastNumber)
				}
				else{
					$.mobile.navigate("#page" + (currentNumber + 1).toString());
				}	
			}
			
			function previousQuestionPage(currentNumber){
				if(currentNumber == 1){
					return
				}
				else $.mobile.navigate("#page" + (currentNumber - 1).toString());
			}
			
			function generateRightAnswerPage(amountOfQuestions){
				var answerPageContent = "";
				
				answerPageContent += 
					'<div data-role = "page" id = "answerPage">'+
						'<div data-role = "header"> <h1>Results / Answers</h1> </div>' +
						'<div role = "main" class = "ui-content">'+
						
						'<h3>Your score : 2/4</h3>'+
						'<br />'
						
						for(var question = 1; question <= amountOfQuestions; question++){
							answerPageContent +=
							'<div data-role = "collapsible">' +
								'<h2>Question '+question+'</h2>' +
								'<ul data-role="listview">'+
									'<li class="wrong  ui-icon-home ui-btn-icon-left">Answer 1</li>' +
									'<li class="wrong">Answer 2</li>' +
									'<li class="wrong">Answer 3</li>' +
									'<li class="right">Answer 4</li>' +
								'</ul>'+
							'</div>' 
						}
						<!-- '<h3>Your answers</h3> <br />'+ -->
						
						answerPageContent += '</div>'+
						'<div data-role = "footer"> <h1>Your score: 50%</h1> </div>'+
					'</div>';
				$("body").html(answerPageContent);
				$.mobile.navigate("#answerPage");
			}
			
		</script>
	</body>
</html>